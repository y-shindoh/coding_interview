# 「世界で闘うプログラミング力を鍛える150問」の問題16.3の回答

## 問題

有名な
[食事する哲学者の問題](https://ja.wikipedia.org/wiki/%E9%A3%9F%E4%BA%8B%E3%81%99%E3%82%8B%E5%93%B2%E5%AD%A6%E8%80%85%E3%81%AE%E5%95%8F%E9%A1%8C)
では、円形のテーブルに哲学者が座り、
彼らの間にはそれぞれ1本だけ箸が置かれています。
哲学者は食事をするのに2本の箸が必要で、箸を取るときは必ず左側を先に取ります。
すべての哲学者が同時に左側の箸を手に取り、
次に右側の箸に手をのばそうとするとき、デッドロックが起こることになります。
スレッドとロックを用いて、
食事する哲学者の問題でデッドロックが起こらないようなシミュレーションを実装してください。


## 回答

単純に右の箸が取れない時、左の箸を置くというルールを適用すれば良い。
(箸を取ることができるか否かを判断する機構は、
[binary semaphore](https://ja.wikipedia.org/wiki/%E3%82%BB%E3%83%9E%E3%83%95%E3%82%A9)
や
[mutex](https://ja.wikipedia.org/wiki/%E3%83%9F%E3%83%A5%E3%83%BC%E3%83%86%E3%83%83%E3%82%AF%E3%82%B9)
などを用いて実装する)
この時、箸が取れるか否かを判断する処理にタイムアウトを指定すること。
また、タイムアウトの時間をランダムな値にすることで、リソース・スタベーション状態を回避できる。

なお、言うまでもないことだが、上記は簡単に対処したもので非常に効率が悪い。
