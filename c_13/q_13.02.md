# 「世界で闘うプログラミング力を鍛える150問」の問題13.2の回答

## 問題

ハッシュテーブルとSTLの `map` を比較してください。
ハッシュテーブルをどのように実装しますか?
入力のサイズが小さい時、ハッシュテーブルの代わりにどのようなデータ構造が選べますか?

## 回答

### ハッシュテーブルとSTLのmapの比較

ハッシュテーブルは、
C++11におけるSTLの `unordered_map` であり、
ハッシュ関数に基づいたならしの計算量 O(1) の探索が可能なデータ構造である。

一方で `map` は、
C++98におけるSTLの `map` とすれば、
二分探索木の一種である赤黒木で実装されていることが多いらしいので、
計算量 O(log n) の探索が可能なデータ構造である。

### ハッシュテーブルの実装

ハッシュ関数を `hash(x)` と、大きさLの配列を `array` として、
入力キー `v` に対し整数 `i = hash(v) % L` を考えると、
入力キー `v` は `array[i]` に連結リストの形で追加・保持される。
もちろん、連結リストには `v` とペアになっている値も保持する。

上記が1つの実装方法である (連鎖法と呼ばれる)。
この時、以下が注意事項となる。

* ハッシュ関数は返却値が適切に分散される性質を持つこと。
* 連結リストの箇所は他のデータ構造でも実現できる。
* 上記配列は必要に応じて動的に広げる実装にすると良い。
  この実装により、探索時に連結リストをたどる計算量を減らすことができる。

### 入力のサイズが小さい時のハッシュテーブルの代替データ構造

平衡二分探索木 (赤黒木, Treapなど) で十分対応できる。
